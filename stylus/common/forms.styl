/**
 * Be warned! Some super complicated math below to get spacing just right.
 */

// We want labels, controls, and help text to be spaced evenly the same.
// This is the spacing amount that we would like.
$form-common-spacing = ($line-height-computed / 2)

// This is a computed value of the amount of spacing that is between the top of the text
// and the top of the line. Basically the amount of spacing around the font in the line.
$line-spacing-above-text = (($line-height-computed - $font-size-base) / 2)

.form-group
	@extend .anim-fade-in-right, .stagger, .no-animate-leave
	margin-bottom: ($line-height-computed * 1.5)

.input-group-addon
	color: $gray

.form-group.optional
	.control-label:after
		content: ' (optional)'
		color: $text-muted
		font-size: 85%

// Form controls have no spacing around them.
// The elements that wrap around get the spacing.
.form-control

	&:focus
		box-shadow: none

	&.ng-dirty.ng-invalid
		border-color: $gj-pink

	// We overwrite bootstrap's placeholder styling so we can do italics.
	// Firefox
	&::-moz-placeholder
		color: $input-color-placeholder
		opacity: 1
		font-style: italic

	// Internet Explorer 10+
	&:-ms-input-placeholder
		color: $input-color-placeholder
		font-style: italic

	// Safari and Chrome
	&::-webkit-input-placeholder
		color: $input-color-placeholder
		font-style: italic

// Space the bottom of the control label away from its control.
.control-label
	font-family: $font-family-heading
	margin-bottom: $form-common-spacing

// Make pointers!
input[type="checkbox"]
input[type="radio"]
	cursor: pointer

.checkbox, .checkbox-inline
.radio, .radio-inline

	// Want any jolticons to be a pointer as well.
	label > .jolticon
		cursor: pointer

	// Disabled styling for checkboxes and radios.
	&.disabled
		color: $text-muted
		&
		& > label
		& > label > .jolticon
			cursor: not-allowed

// Space the top of the help block away from its control.
// We assume that a form control/error message will usually follow the help block.
// So we put our common spacing below, plus the extra spacing since there won't be any normal text line following.
.help-block
	margin-top: $form-common-spacing
	margin-bottom: $form-common-spacing + $line-spacing-above-text
	color: $gray-light
	font-size: 14px

legend + .help-block
	margin-top: 0

.help-inline
	color: $gray-light
	font-size: 14px

// If a help block immediately follows a control label, then the control label
// has the spacing and we don't need to space.
.control-label + .help-block
	margin-top: 0

// Notice that our errors have the normal margin bottom spacing.
.help-block.error
	position: relative
	padding: 10px
	margin-top: 7px
	margin-bottom: $form-common-spacing
	font-size: $font-size-base
	background-color: $gj-pink
	color: $white !important

	&:before
		content: ''
		display: block
		caret( color: $gj-pink, direction: 'up', size: 5px )
		left: 10px

	// For when the help block is above, swap the spacing.
	&.above
		margin-bottom: 7px
		margin-top: $form-common-spacing

		&:before
			display: none

		&:after
			content: ''
			display: block
			caret( color: $gj-pink, direction: 'down', size: 5px )
			left: 10px

form button
	@extend .anim-fade-in
	@extend .anim-fade-leave

	.jolticon-check
		margin-right: 0
		overflow: hidden
		width: 20px
		text-align: right

		&.ng-hide-add
		&.ng-hide-remove
			transition: opacity 300ms, width 300ms
			display: inline-block !important
			opacity: 1
			width: 20px

		&.ng-hide
			opacity: 0
			width: 0
